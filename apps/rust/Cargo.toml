[package]
name = "rust"
version = "0.1.0"
edition = "2021"

[dependencies]
axum = { workspace = true, features = ["ws", "multipart"] }
tokio = { workspace = true, features = ["full"] }
axum-extra = { workspace = true, features = ["cookie"] }
serde = { workspace = true, features = ["derive"] }
serde_json = { workspace = true }
dotenvy = { workspace = true }
tracing = { workspace = true }
tracing-subscriber = { workspace = true, features = ["env-filter"] }
envy = { workspace = true }
anyhow = { workspace = true }
sqlx = { workspace = true, features = ["runtime-tokio-rustls", "mysql", "macros", "migrate", "chrono"] }
uuid = { workspace = true, features = ["v4", "serde"] }
chrono = { workspace = true, features = ["serde"] }
bytes = { workspace = true }
futures = { workspace = true }
bcrypt = { workspace = true }
jsonwebtoken = { workspace = true }
reqwest = { workspace = true, features = ["json", "stream"] } # For image proxy
http = { workspace = true } # For http::StatusCode and HeaderMap
image = { workspace = true, default-features = false, features = ["jpeg", "png"] } # For image compression
sha1 = { workspace = true } # For cache key generation
data-url = { workspace = true } # For data URL parsing
base64 = { workspace = true } # For base64 encoding/decoding
tokio-util = { workspace = true, features = ["codec"] } # For stream handling
async-trait = { workspace = true } # For async traits
tempfile = { workspace = true } # For temporary files
serde_yaml = { workspace = true } # For parsing YAML files
scraper = { workspace = true } # For HTML parsing (cheerio equivalent)
regex = "1.11" # For regex matching in episode number extraction
oxidize-pdf = { workspace = true } # For PDF compression
infer = { workspace = true } # For file type detection
ffmpeg-next = { workspace = true }
once_cell = { workspace = true }
rust_lib = { path = "../../libs/rust" }
urlencoding = { workspace = true }
utoipa = { workspace = true }


[dev-dependencies]
tokio-test = { workspace = true }
testcontainers = { workspace = true }
testcontainers-modules = { workspace = true, features = ["mysql"] }

[build-dependencies]
regex = "1.11"

[[bin]]
name = "scaffold"
path = "src/bin/scaffold.rs"
